import{u as v,j as e,F as j,a as o,B as p,b as S,R as n,c as C,d as E,g as I,W as L}from"./index-uCdg3-W8.js";import{r as i,u as P}from"./vendor-router-BURTDQSf.js";import{a as R}from"./vendor-forms-DlkW-UdB.js";import"./vendor-react-DavUf6mE.js";const g=()=>{const a=i.useId(),[m,c]=i.useState(""),[r,u]=i.useState(!1),[$,b]=i.useState({type:"",text:""}),{login:f}=v(),l=P(),t=R({mode:"onSubmit",defaultValues:{firstName:"",lastName:"",email:"",password:"",phoneNumber:""}}),[x,y]=i.useState("create"),h=S(r,x),N=async d=>{try{u(!0),y("create"),c("");const s=await C.register(d);if(s&&s.isSuccess)try{await f(d.email,d.password),sessionStorage.setItem("isFirstLogin","true"),l(n.STABLE_ONBOARDING)}catch{l(n.LOGIN),b(E("Registration successful. Please log in with your credentials."))}else throw new Error(s?.message||"Registration failed")}catch(s){console.error("Registration error details:",s);const w=I(s,{defaultMessage:"Registration failed. Please try again later."});c(w.text)}finally{u(!1)}};return e.jsxs("div",{className:"lg: max-h-screen",children:[e.jsx("h2",{className:"hidden lg:block lg:text-2xl lg:text-center",children:"Sign up"}),e.jsxs(j,{methods:t,onSubmit:N,children:[m&&e.jsx("div",{className:"bg-red-50 border-l-3 border-error-400 p-3 rounded-md mb-4",role:"alert","aria-live":"assertive",children:e.jsx("p",{className:"text-sm text-error-600",children:m})}),e.jsx(o,{name:"firstName",type:"text",placeholder:"First name...",id:`${a}-firstName`,validation:{required:"First name is required"},inputClassName:`w-full px-3 py-4 border ${t.formState.errors.firstName?"border-error-400":"border-gray"} rounded-md !border-gray focus:outline-none focus:ring-primary focus:ring-1 focus:border-primary`,disabled:r,className:"mb-2"}),e.jsx(o,{name:"lastName",type:"text",placeholder:"Last name...",id:`${a}-lastName`,validation:{required:"Last name is required"},inputClassName:`w-full px-3 py-4 border ${t.formState.errors.lastName?"border-error-400":"border-gray"} rounded-md !border-gray focus:outline-none focus:ring-primary focus:ring-1 focus:border-primary`,disabled:r,className:"mb-2"}),e.jsx(o,{name:"phoneNumber",type:"tel",placeholder:"Phone number (optional)",id:`${a}-phoneNumber`,autoComplete:"tel",inputClassName:"w-full px-3 py-4 border !border-gray rounded-md focus:outline-none focus:ring-primary focus:ring-1 focus:border-primary",disabled:r,className:"mb-2"}),e.jsx(o,{name:"email",type:"email",placeholder:"Email...",id:`${a}-email`,autoComplete:"email",validation:{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}},inputClassName:`w-full px-3 py-4 border ${t.formState.errors.email?"border-error-400":"border-gray"} rounded-md !border-gray focus:outline-none focus:ring-primary focus:ring-1 focus:border-primary`,disabled:r,className:"mb-2"}),e.jsx(o,{name:"password",type:"password",placeholder:"Password...",labelPosition:"above",label:"Password needs to be at least 8 characters long, contain a capital letter and a special sign",id:`${a}-password`,autoComplete:"new-password",showPasswordToggle:!0,validation:{required:"Please enter your new password",minLength:{value:8,message:"Needs 8+ chars, 1 big letter & 1 special sign"}},inputClassName:`w-full px-3 py-4 border ${t.formState.errors.password?"border-error-400":"border-gray"} rounded-md !border-gray focus:outline-none focus:ring-primary focus:ring-1 focus:border-primary`,disabled:r,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(p,{type:"primary",htmlType:"submit",className:"w-9/10 hover:scale-101 transition-transform duration-300",loading:r,disabled:r,children:r?h.getMessage():"Create account"}),e.jsx(p,{type:"secondary",className:"w-9/10 lg:hidden",onClick:()=>l(n.LOGIN),disabled:r,children:"Back to login"}),e.jsxs("div",{className:"hidden lg:flex lg:items-center lg:gap-1 lg:mt-2",children:[e.jsx("span",{className:"text-sm text-gray",children:"Already have an account,"}),e.jsx("button",{type:"button",className:"text-sm font-semibold text-primary hover:underline focus:outline-none",onClick:()=>l(n.LOGIN),disabled:r,children:"Sign in"})]})]})]})]})},M=()=>e.jsxs(L,{children:[e.jsx("div",{className:"flex flex-col lg:hidden",children:e.jsx("section",{className:"flex-1 py-2 bg-transparent overflow-y-auto",children:e.jsx(g,{})})}),e.jsx("section",{className:"hidden lg:block",children:e.jsx(g,{})})]});export{M as default};
