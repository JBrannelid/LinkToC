import{j as e,u as s,r}from"./vendor-react-a0IVf7AC.js";import{a as l,h as a,a1 as t,i,M as o,P as n,f as c,a3 as d,a4 as x,R as m,a5 as h,a6 as u,a7 as j,a8 as g,a9 as f,aa as p,Z as b}from"./form-components-Dej4WxZX.js";import{L as v,B as y,c as w}from"./ui-components-Cdkvl4Hk.js";const C=({size:s=24,backgroundColor:r="bg-error-500",iconColor:l="text-white",className:a="",strokeWidth:t=1.5,...i})=>{const o=Math.floor(.6*s);return e.jsx("div",{className:`${r} ${l} flex items-center justify-center rounded-full overflow-hidden ${a}`,style:{width:s,height:s},...i,children:e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 13v-2H7V8l-5 4 5 4v-3z",strokeWidth:t}),e.jsx("path",{d:"M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z",strokeWidth:t})]})})},N=({label:s,onClick:r,icon:l})=>e.jsxs(y,{type:"secondary",className:"w-full text-left justify-start px-4",onClick:r,children:[l&&e.jsx("span",{className:"mr-2",children:l}),s]}),k=({title:h="Settings",renderMenuItems:u,renderAdditionalContent:j,showProfileEdit:g=!0})=>{const{logout:f,user:p}=l(),{currentStable:b,getCurrentStableRole:N}=a(),k=N(),S=s(),[P,M]=r.useState(!1),[E,z]=r.useState(!1),[A,F]=r.useState(!1),{userData:L,userLoading:R,userError:U,loadingState:B,fetchAndUpdateUserData:D}=t();if(R)return e.jsxs("div",{className:"flex-1 flex items-center justify-center",children:[e.jsx(v,{size:"medium",className:"text-gray"}),e.jsx("p",{className:"ml-2",children:B.getMessage()})]});const I=L||p,T=i(I);return e.jsxs("div",{className:"flex flex-col min-h-screen bg-background pb-20 lg:p-0 overflow-y-hidden ",children:[e.jsx("div",{className:"bg-primary-light lg:bg-background border-b-1 border-light ",children:e.jsx(o,{title:h})}),e.jsxs("div",{className:"flex-1 px-4 py-6 space-y-4 md:px-50 xl:px-100",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center drop-shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden mr-4",children:e.jsx(n,{user:I,className:"w-full h-full",size:"rounded"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium",children:T}),e.jsx("p",{className:"text-grey",children:(null==I?void 0:I.email)||"No email address registered"})]}),g&&e.jsx(y,{onClick:()=>z(!0),className:"p-2 text-primary",type:"icon","aria-label":"Edit user profile",children:e.jsx(c,{className:"w-9 h-9"})})]}),j&&j({currentRole:k,currentStable:b}),U&&e.jsx("div",{className:"bg-red-50 border-l-4 border-error-400 p-4 text-error-600",children:U}),e.jsx("div",{className:"space-y-4",children:u({setShowUserEditProfileForm:z,navigate:S,currentRole:k,currentStable:b})}),e.jsx("div",{className:"pt-8 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 justify-items-center gap-5",children:[e.jsx(y,{type:"primary",className:"w-9/10",onClick:()=>d(S,m),children:"Change stable"}),e.jsx(y,{type:"secondary",className:"w-9/10",onClick:()=>{F(!0)},loading:P,children:"Log out"})]})}),e.jsx(w,{isOpen:A,onClose:()=>F(!1),onConfirm:async()=>{try{M(!0),await f(),S(m.LOGIN)}catch(e){}finally{M(!1),F(!1)}},loading:P,title:"Do you want to log out?",confirmButtonText:"Log out",confirmButtonType:"danger",icon:e.jsx(C,{size:70,backgroundColor:"bg-error-500",iconColor:"text-white"})})]}),E&&e.jsx(x,{onClose:()=>z(!1),onSuccess:()=>{D(),z(!1)},userData:L})]})},S=()=>{const r=s();return e.jsx(k,{title:"Settings",renderMenuItems:({setShowUserEditProfileForm:s})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Edit Profile",onClick:()=>s(!0)}),e.jsx(N,{label:"Manage Horses",onClick:()=>h(r,m)}),e.jsx(N,{label:"Manage Stables",onClick:()=>u(r,m)}),e.jsx(N,{label:"Terms of Service",onClick:j}),e.jsx(N,{label:"Support",onClick:g}),e.jsx(N,{label:"Privacy Policy",onClick:f})]}),renderAdditionalContent:({currentStable:s})=>e.jsx("div",{className:"bg-white rounded-lg p-4 flex items-center drop-shadow-lg border border-primary",children:e.jsxs("h3",{className:"text-primary text-sm",children:["You are the admin of ",null==s?void 0:s.name,"."]})})})},P=()=>{const r=s();return e.jsx(k,{title:"Settings",renderMenuItems:({setShowUserEditProfileForm:s})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Edit Profile",onClick:()=>s(!0)}),e.jsx(N,{label:"Stable Requests",onClick:()=>p(r,m)}),e.jsx(N,{label:"Terms of service",onClick:j}),e.jsx(N,{label:"Support",onClick:g}),e.jsx(N,{label:"Privacy Policy",onClick:f})]})})},M=()=>{const{hasAdminAccess:s}=b();return s()?e.jsx(S,{}):e.jsx(P,{})};export{M as default};
