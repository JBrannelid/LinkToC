import{j as e,F as S,a as k,B as g,A as f,c as C,d as P,z as F,g as E,R as j,W as I,L}from"./index-DfGkK8xo.js";import{r as l,u as y}from"./vendor-router-BURTDQSf.js";import{a as M}from"./vendor-forms-DlkW-UdB.js";import{F as R}from"./FormMessage-BNuHOz1u.js";import"./vendor-react-DavUf6mE.js";const z=({size:o=24,color:i="currentColor",className:r="",strokeWidth:n=1.5,...t})=>e.jsx("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,...t,children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h2v2h-2v-2zm0-8h2v6h-2V9z",fill:i,strokeWidth:n})}),p=({onSuccess:o,setParentLoading:i=null})=>{const[r,n]=l.useState(!1),[t,a]=l.useState({type:"",text:""}),[c,w]=l.useState(0),[d,x]=l.useState(0),b=y(),N=M({defaultValues:{email:""}});l.useEffect(()=>{i&&i(r)},[r,i]);const h=()=>{b(j.LOGIN)};l.useEffect(()=>{let m;return d>0&&(m=setTimeout(()=>{x(u=>u-1)},1e3)),()=>{m&&clearTimeout(m)}},[d]);const v=async m=>{const u=Date.now();if(c>0&&u-c<6e4){const s=Math.ceil((6e4-(u-c))/1e3);x(s),a(f(`Please wait ${s} seconds before trying again.`));return}n(!0),a({type:"",text:""});try{const s=await C.forgotPassword(m.email);s&&(s.isSuccess||s.statusCode===200||s.statusCode===201)?(w(u),x(60),s.message&&s.message.includes("issue sending the email")?(a(f("Reset request created, but there was an issue sending the email. If you don't receive an email in a few minutes, check your spam folder or contact support.")),n(!1)):(a(P("Reset link has been sent to your email. Check your inbox (including spam folder)")),n(!1),o&&o()),sessionStorage.setItem("resetPasswordEmail",m.email)):(console.error("API returned unsuccessful response:",s),a(F(s?.message||"Something went wrong. Please try again.")),n(!1))}catch(s){a(E(s,{defaultMessage:"Failed to process request. Please try again later"})),n(!1)}};return e.jsxs(S,{methods:N,onSubmit:v,className:"forgot-password-form",ariaLabel:"Forgot Password Form",children:[e.jsxs("div",{children:[e.jsx(k,{name:"email",type:"email",placeholder:"Email...",inputClassName:"!border-gray !bg-white",validation:{required:"Please enter a valid email address",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-.]+$/i,message:"Please use a valid email format"}}}),e.jsx("span",{className:"text-xs text-center mt-2 pl-1 text-error-500",children:"Check your spam folder"})]}),t.type==="warning"&&e.jsxs("div",{className:"mt-3 p-3 bg-amber-50 border border-b-warning-300 rounded-md flex items-start",children:[e.jsx(z,{size:20,className:"text-amber-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-error-600",children:t.text})]}),t.type&&t.type!=="warning"&&e.jsx(R,{message:t,className:"mb-4"}),e.jsxs("div",{className:"mt-30 flex flex-col items-center gap-5 ",children:[e.jsx(g,{type:"primary",htmlType:"submit",className:"w-9/10",disabled:r||d>0,loading:r,"aria-busy":r,children:e.jsx("span",{children:d>0?`Wait ${d} seconds...`:"Reset password"})}),e.jsx(g,{type:"secondary",className:"w-9/10 lg:hidden",onClick:h,disabled:r,children:"Back to login"})]}),e.jsxs("div",{className:"hidden lg:flex lg:justify-center lg:items-center lg:gap-2 lg:mt-4 w-full",children:[e.jsx("span",{className:"text-sm text-gray items-center",children:"Remember the Password,"}),e.jsx("button",{type:"button",className:"text-sm font-semibold text-primary hover:underline focus:outline-none",onClick:h,children:"Sign in"})]})]})},q=()=>{const o=y(),[i,r]=l.useState(!1),[n,t]=l.useState(!1),a=()=>{o(j.LOGIN)},c=()=>{t(!1),r(!0)};return e.jsxs(I,{children:[e.jsx("div",{className:"flex flex-col lg:hidden",children:e.jsx("div",{className:"flex-1 bg-transparent flex justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:i?e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-medium mb-3",children:"Email Sent!"}),e.jsxs("div",{className:"bg-green-50 p-5 rounded-md",children:[e.jsx("p",{className:"mb-4 ",children:"Instructions to reset your password have been sent to your email. Check your inbox (and spam folder) for further instructions."}),e.jsx("button",{onClick:a,className:"text-primary hover:underline",children:"Back to login"})]})]}):e.jsxs("div",{className:"mt-10 ",children:[e.jsx("h2",{className:" pl-4 text-center",children:"Enter your email address to receive a password reset link"}),e.jsx(p,{onSuccess:c,setParentLoading:t,handleGoBack:a})]})})})}),e.jsx("section",{className:"hidden lg:flex lg:justify-center lg:items-center w-full",children:e.jsxs("div",{className:"w-full max-w-md px-4 text-center",children:[e.jsx("h2",{className:"text-2xl mb-2",children:"Forgot password?"}),e.jsx("p",{className:"text-gray mb-6",children:"Enter your email, we'll send you reset instructions."}),n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(L,{size:"medium",className:"text-gray"}),e.jsx("p",{className:"ml-2",children:"Processing..."})]}):i?e.jsxs("div",{className:"bg-green-50 p-5 rounded-md",children:[e.jsx("p",{className:"mb-4",children:"Instructions to reset your password have been sent to your email. Check your inbox (and spam folder) for further instructions."}),e.jsx("button",{onClick:a,className:"text-primary hover:underline",children:"Back to login"})]}):e.jsx(p,{onSuccess:c,setParentLoading:t,handleGoBack:a})]})})]})};export{q as default};
