import{j as e,h as s,u as a,r}from"./vendor-react-B_QZno8V.js";import{S as l,a as i}from"./StableInfo-WbHHNEb_.js";import{i as t,j as n,P as c,h as o,b as d,R as m,m as u,M as x}from"./form-components-BwsA2IIA.js";import{C as h,b as p,g as b,L as f,B as g}from"./ui-components-3MKBAZVk.js";import{u as j}from"./useStableManagement-DW6bxP1v.js";const y=({member:s,onClick:a})=>{const r=t(s),l=n(s.role),i={id:s.userId||s.id,firstName:s.firstName||"",lastName:s.lastName||"",profilePicture:s.profilePicture};return e.jsx(h,{className:"cursor-pointer",onClick:a,children:e.jsxs("div",{className:"p-2 flex flex-col bg-gradient-to-b from-primary-light to-white",children:[e.jsx("div",{className:"flex justify-center bg-background ",children:e.jsx("div",{className:"w-full h-25 mb-2 rounded-xl overflow-hidden border-2 border-primary lg:h-40 xl:h-45 ",children:e.jsx(c,{user:i,className:"w-full h-30 lg:h-50 lg:aspect-ratio mx-auto",alt:`Profile picture of ${r}`,size:"small",fallbackUrl:null})})}),e.jsx(p,{className:"text-xs !text-start",children:r}),l&&e.jsx(b,{className:"text-xs !text-start",children:l})]})})},v=()=>{const{stableId:t}=s(),{currentStable:n,currentUser:c}=o(),h=a(),[p,b]=r.useState(""),v=r.useMemo((()=>t||(null==n?void 0:n.id)),[t,null==n?void 0:n.id]),{members:N,loading:w,loadingState:C}=j(v),k=r.useMemo((()=>{if(!N.length)return[];if(!p.trim())return N;const e=p.toLowerCase();return N.filter((s=>`${s.firstName} ${s.lastName}`.toLowerCase().includes(e)))}),[N,p]),S=r.useCallback((e=>{b(e)}),[]),I=r.useCallback((e=>{if(e){const s=d(m.USER_PROFILE,{userId:e});h(s)}}),[h]),M=r.useCallback((()=>{h(d(m.USER_PROFILE,{userId:null==c?void 0:c.id}))}),[h,null==c?void 0:c.id]),P=r.useMemo((()=>e.jsxs("div",{className:"flex items-center justify-center h-screen",children:[e.jsx(f,{size:"medium",className:"text-gray"}),e.jsx("p",{className:"ml-2",children:null==C?void 0:C.getMessage()})]})),[C]);return w?P:e.jsxs(u.div,{className:"flex flex-col min-h-screen bg-background pb-20 overflow-y-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"bg-primary-light lg:bg-background",children:e.jsx(x,{})}),e.jsx(l,{stableId:v,searchTerm:p,onSearchChange:S,searchPlaceholder:"Search..."}),e.jsxs("div",{className:"px-5 py-3 md:px-10 lg:px-40 xl:px-60 pt-2 lg:pt-10",children:[e.jsx("div",{className:"mb-5 border-t border-b border-gray py-5 lg:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full px-10 py-2 border border-primary rounded-lg focus:outline-none focus:ring-1 focus:ring-primary",value:p,onChange:e=>b(e.target.value)}),e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center",children:e.jsx(i,{className:"w-5 h-5 text-primary",strokeWidth:3})})]})}),e.jsx(u.div,{className:"mb-6 flex justify-center lg:hidden",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},children:e.jsx(g,{type:"secondary",className:"w-full max-w-sm",onClick:M,children:"My profile"})}),e.jsx(u.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 gap-5",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.08}}},children:k.map(((s,a)=>e.jsx(u.div,{variants:{hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1}},whileHover:{y:-2,scale:1.02,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},whileTap:{scale:.98},transition:{duration:.2},children:e.jsx(y,{member:s,onClick:()=>I(s.userId)})},`stable-member-${s.id}-${a}`)))}),0===k.length&&e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-gray",children:"No members found"})})]})]})};export{v as default};
