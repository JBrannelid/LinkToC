import{j as e,L as P,m as y,l as T,R as A,u as I,e as R,n as D,x as F,B as f,P as C,J as V}from"./index-DumleHd1.js";import{u as B,r as p,e as _}from"./vendor-router-BURTDQSf.js";import{E as M}from"./EditInformationModal-C8zU59Nv.js";import{M as k}from"./MessageIcon-BG4vR2Al.js";import{P as N}from"./PenIcon-RYHV5h0f.js";import"./vendor-react-DavUf6mE.js";import"./vendor-forms-DlkW-UdB.js";import"./FormMessage-BbNLOTA4.js";import"./JoinStableForm-C5u9_KeG.js";import"./HandRaisedIcon-ZVqSdu2S.js";import"./LocationPinIcon-fZ3LTP7Y.js";const Z=({userProfile:s})=>{const t=B(),c=i=>i?.imageUrl||"/images/horeImagePlaceholder.webp",l=s?.userHorseRoles||[],o=!s,a=i=>{t(T(A.HORSE_PROFILE,{horseId:i}))};return o?e.jsxs("div",{className:"flex justify-center items-center p-4",children:[e.jsx(P,{size:"medium",className:"text-gray"}),e.jsx("span",{className:"ml-2",children:"Loading user's horses..."})]}):l.length===0?e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsx("p",{className:"text-center text-gray py-4",children:"No horses available for this user"})}):e.jsx(e.Fragment,{children:e.jsxs(y.div,{className:"grid grid-cols-1 gap-4 px-10 sm:grid-cols-2 sm:gap-15 lg:grid-cols-3 lg:gap-6",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:[" ",l.map(i=>{const n=i.horse,r=n?.name||"Unnamed Horse",d=n?.color||"Unknown",m=i.userRole;return e.jsxs(y.div,{className:"border border-primary rounded-lg overflow-hidden cursor-pointer",onClick:()=>a(n.id),variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{y:-4,scale:1.02,boxShadow:"0 8px 25px rgba(0,0,0,0.12)"},whileTap:{scale:.98},transition:{duration:.2},children:[e.jsx("div",{className:"w-full h-50",children:e.jsx("img",{src:c(n),alt:`Horse ${r}`,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-bold",children:r}),e.jsxs("p",{className:"text-gray text-sm",children:["Color: ",d,e.jsx("br",{}),"Role:"," ",m===0?"Owner":m===1?"Rider":"Caretaker"]})]})]},`horse-${n.id}`)})]})})},J=({user:s,userProfile:t,activeTab:c,forceRefresh:l})=>{const{user:o}=I(),[a,i]=p.useState({isOpen:!1,field:"",label:"",value:"",multiline:!1}),n=t?.userStableRole?.user||s,r=n?.userId||n?.id,d=String(o?.id)===String(r),m=(u,v,b,w=!1)=>{i({isOpen:!0,field:u,label:v,value:b,multiline:w})},x=()=>{i({isOpen:!1,field:"",label:"",value:"",multiline:!1})},h=()=>{switch(c){case"info":return e.jsx(S,{user:n,userProfile:t,openEditModal:m,isCurrentUser:d});case"horses":return e.jsx(Z,{userId:r,userProfile:t});default:return e.jsx(S,{user:n,userProfile:t,openEditModal:m,isCurrentUser:d})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block lg:px-40 xl:px-60 py-4",children:h()}),e.jsx("div",{className:"py-2 lg:hidden",children:h()}),e.jsx(M,{isOpen:a.isOpen,onClose:x,fieldName:a.field,fieldLabel:a.label,initialValue:a.value,userId:r,multiline:a.multiline,userData:n,isCurrentUser:d,refreshUserData:l})]})},S=({user:s,openEditModal:t,isCurrentUser:c})=>{const l=s?.description||"📜 No current bio",o=s?.coreInformation||"🤫 This user's keeping it mysterious...";return e.jsxs("div",{className:"space-y-4 px-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-semibold md:whitespace-nowrap md:flex-shrink-0",children:"Current status:"}),e.jsx("div",{className:"bg-primary-light p-4 rounded-lg shadow-lg w-full cursor-pointer hover:border hover:border-primary",onClick:c?()=>t("coreInformation","Current Status",o):void 0,children:e.jsx("div",{className:"w-full",children:e.jsx("p",{children:o})})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg cursor-pointer hover:border hover:border-primary",onClick:c?()=>t("description","Bio",l,!0):void 0,children:e.jsx("p",{className:"whitespace-pre-line",children:l})})]})},E=({size:s=24,color:t="currentColor",className:c="",strokeWidth:l=1.5,...o})=>{const a=s||24,i=`${c}`;return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,width:a,height:a,viewBox:"0 0 256 256",fill:"none",stroke:t,strokeWidth:l,strokeLinecap:"round",strokeLinejoin:"round",...o,children:e.jsx("path",{d:"M232,104v48a16.01833,16.01833,0,0,1-16,16H168v48a16.01833,16.01833,0,0,1-16,16H104a16.01833,16.01833,0,0,1-16-16V168H40a16.01833,16.01833,0,0,1-16-16V104A16.01833,16.01833,0,0,1,40,88H88V40a16.01833,16.01833,0,0,1,16-16h48a16.01833,16.01833,0,0,1,16,16V88h48A16.01833,16.01833,0,0,1,232,104Z",fill:"currentColor"})})},U=({size:s=24,color:t="currentColor",className:c="",strokeWidth:l=1.5,...o})=>{const a=s||24,i=`${c}`;return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i,width:a,height:a,viewBox:"0 0 25 25",fill:"none",stroke:t,strokeWidth:l,strokeLinecap:"round",strokeLinejoin:"round",...o,children:e.jsx("path",{d:"M16.5562 12.9062L16.1007 13.359C16.1007 13.359 15.0181 14.4355 12.0631 11.4972C9.10812 8.55901 10.1907 7.48257 10.1907 7.48257L10.4775 7.19738C11.1841 6.49484 11.2507 5.36691 10.6342 4.54348L9.37326 2.85908C8.61028 1.83992 7.13596 1.70529 6.26145 2.57483L4.69185 4.13552C4.25823 4.56668 3.96765 5.12559 4.00289 5.74561C4.09304 7.33182 4.81071 10.7447 8.81536 14.7266C13.0621 18.9492 17.0468 19.117 18.6763 18.9651C19.1917 18.9171 19.6399 18.6546 20.0011 18.2954L21.4217 16.883C22.3806 15.9295 22.1102 14.2949 20.8833 13.628L18.9728 12.5894C18.1672 12.1515 17.1858 12.2801 16.5562 12.9062Z",fill:"currentColor"})})},q=({user:s,userProfile:t,forceRefresh:c})=>{const{currentStable:l}=R(),{user:o}=I(),[a,i]=p.useState({isOpen:!1,field:"",label:"",value:"",multiline:!1}),n=t?.userStableRole,r=n?.user||s,d=D(r),m=String(o.id)===String(r.id),x=n?n.role:s.stableRoles?s.stableRoles[l?.id]:s.role,h=F(x),[u,v]=p.useState(!1),[b,w]=p.useState(!1),g=r?.emergencyContact,j=(H,O,z,$=!1)=>{i({isOpen:!0,field:H,label:O,value:z,multiline:$})},L=()=>{i({isOpen:!1,field:"",label:"",value:"",multiline:!1})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden lg:block lg:px-40 xl:px-60 pt-8",children:[e.jsxs("div",{className:"flex justify-between items-start ",children:[e.jsxs("div",{className:"flex flex-col relative group",children:[e.jsx("h1",{className:"text-3xl font-heading font-semibold",children:d}),e.jsx("p",{className:"text-sm text-gray",children:e.jsx("span",{children:h||"Member"})})]}),e.jsxs("div",{className:"flex flex-row gap-2 mr-5 mt-10",children:[r.phoneNumber&&e.jsxs("div",{className:"flex flex-col items-center relative group",children:[e.jsxs(f,{type:"secondary",className:"rounded-lg !border-primary flex flex-col max-h-20 min-h-19 min-w-25","aria-label":"Phone",children:[e.jsx(U,{className:"text-primary mb-1",size:20}),e.jsx("span",{className:"mt-1 mb-1 text-primary font-medium",children:r.phoneNumber})]}),e.jsx("span",{className:"mt-1 text-xs text-center text-primary",children:"Number"}),m&&e.jsx("button",{className:"absolute -right-2 -top-2 transition-opacity bg-primary-light rounded-full p-1",onClick:()=>j("phoneNumber","Phone Number",r.phoneNumber||""),children:e.jsx(N,{className:"w-5 h-5 text-primary"})})]}),e.jsxs("div",{className:"flex flex-col items-center relative group",children:[e.jsxs(f,{type:"secondary",className:"rounded-lg !border-primary flex flex-col max-h-20 min-h-19 min-w-25","aria-label":"Emergency contact",children:[e.jsx(E,{className:"text-primary mb-1",size:20}),e.jsx("span",{className:"mt-1 mb-1 text-primary font-medium",children:g})]}),e.jsx("span",{className:"mt-1 text-xs text-center text-primary",children:"Emergency contact"}),m&&e.jsx("button",{className:"absolute -right-2 -top-2 transition-opacity bg-primary-light rounded-full p-1",onClick:()=>j("emergencyContact","Contact",r.emergencyContact||""),children:e.jsx(N,{className:"w-5 h-5 text-primary"})})]}),e.jsxs("div",{className:"flex flex-col items-center relative group",children:[e.jsx(f,{type:"secondary",className:"rounded-lg !border-primary flex flex-col opacity-40 max-h-20 min-h-19 min-w-25","aria-label":"Messenger",children:e.jsx(k,{className:"text-primary mb-1",size:25})}),e.jsx("span",{className:"mt-1 text-xs text-center text-primary",children:"Messenger"})]})]})]}),e.jsx("div",{className:"relative mt-4 border-2 border-primary rounded-lg overflow-hidden flex justify-center bg-gradient-to-b from-primary-light to-white",children:e.jsx("div",{className:"w-full h-90 relative overflow-hidden ",children:e.jsx(C,{user:r,className:"w-full h-160 object-contain object-[center_40%]",size:"small",alt:`Profile of ${d}`})})})]}),e.jsxs("div",{className:"lg:hidden relative",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("div",{className:"w-full h-90 sm:h-120 md:h-150 bg-gradient-to-b from-primary-light to-white",children:e.jsx(C,{user:r,className:"w-full h-full object-cover object-[center_25%]",size:"small",alt:`Profile of ${d}`})})}),e.jsxs("div",{className:"px-4 sm:px-6 md:px-8 py-6 bg-background rounded-t-3xl -mt-8 relative z-10 border-light border-t-2",children:[e.jsxs("div",{className:"flex flex-col gap-1 relative group ",children:[e.jsx("h1",{className:"text-3xl font-heading font-semibold pr-8 ",children:d}),e.jsx("p",{className:"text-sm text-gray",children:e.jsx("span",{children:h||"Unknown user role"})})]}),e.jsxs("div",{className:"flex justify-start gap-2 mt-6 md:justify-center md:px-20",children:[e.jsxs("div",{className:"flex flex-col items-center w-full md:w-9/10 relative group",children:[e.jsx(f,{type:"secondary",className:"w-full h-13 md:h-12 !bg-primary-light !border-primary rounded-xl","aria-label":"Phone",onClick:()=>v(!u),children:u?e.jsx("span",{className:"text-sm text-primary font-medium",children:r.phoneNumber}):e.jsx(U,{className:"text-primary",size:30})}),e.jsx("span",{className:"mt-1 text-xs text-center text-primary",children:"Number"}),m&&e.jsx("button",{className:"absolute -right-1 -top-1 transition-opacity bg-white rounded-full p-1",onClick:()=>j("phoneNumber","Phone Number",r.phoneNumber||""),children:e.jsx(N,{className:"w-5 h-5 text-primary"})})]}),e.jsxs("div",{className:"flex flex-col items-center w-full md:w-9/10 relative group",children:[e.jsx(f,{type:"secondary",className:`w-full h-13 md:h-12 !bg-primary-light !border-primary rounded-xl ${g?"":"opacity-40"}`,"aria-label":"Emergency contact",onClick:()=>w(!b),disabled:!g,children:b&&g?e.jsx("span",{className:"text-sm text-primary font-medium",children:g}):e.jsx(E,{className:"text-primary",size:30})}),e.jsx("span",{className:"mt-1 text-xs text-center text-primary",children:"Emergency contact"}),m&&e.jsx("button",{className:"absolute -right-1 -top-1 transition-opacity bg-white rounded-full p-1",onClick:()=>j("emergencyContact","Contact",r.emergencyContact||""),children:e.jsx(N,{className:"w-5 h-5 text-primary"})})]}),e.jsxs("div",{className:"flex flex-col items-center w-full md:w-9/10 opacity-40",children:[e.jsx(f,{type:"secondary",className:"w-full h-13 md:h-12 !bg-primary-light !border-primary rounded-xl","aria-label":"Messenger",children:e.jsx(k,{className:"text-primary",size:30})}),e.jsx("span",{className:"mt-1 text-xs text-center text-primary",children:"Messenger"})]})]})]})]}),e.jsx(M,{isOpen:a.isOpen,onClose:L,fieldName:a.field,fieldLabel:a.label,initialValue:a.value,userId:r?.userId||r?.id,multiline:a.multiline,userData:r,refreshUserData:c})]})},G=({activeTab:s,onChange:t})=>e.jsx("div",{className:"px-1 md:px-6 py-2 mb-4",children:e.jsxs("div",{className:"flex justify-evenly px-0 sm:px-10 md:px-20 relative",children:[e.jsxs("button",{className:`px-4 py-1 text-lg lg:text-xl lg:py-2 font-semibold relative ${s==="info"?"text-primary":"text-gray"}`,onClick:()=>t("info"),children:["About",s==="info"&&e.jsx(y.div,{layoutId:"underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),e.jsxs("button",{className:`px-4 py-1 text-lg lg:text-xl lg:py-2 font-semibold relative ${s==="horses"?"text-primary":"text-gray"}`,onClick:()=>t("horses"),children:["Horses",s==="horses"&&e.jsx(y.div,{layoutId:"underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]})}),ie=()=>{const{userId:s}=_(),[t,c]=p.useState("info"),{currentStable:l}=R(),[o,a]=p.useState(0),{userData:i,userProfile:n,loading:r,error:d,loadingState:m,fetchUserProfile:x}=V(s),h=p.useCallback(async()=>{if(s&&l?.id)try{await x(s,l.id),a(u=>u+1)}catch(u){console.error("Error refreshing profile:",u)}},[s,l?.id,x]);return p.useEffect(()=>{s&&l?.id&&x(s,l.id)},[s,l?.id,x]),r?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(P,{size:"medium",className:"text-gray"}),e.jsx("span",{className:"ml-2",children:m.getMessage()})]}):d||!i?e.jsxs("div",{className:"bg-white rounded-lg p-6 m-4 text-center",children:[e.jsx("h2",{className:"text-xl font-medium mb-2",children:"User not found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Poof! That user just pulled a disappearing act 🧙‍♂️"})]}):e.jsxs("div",{className:"flex flex-col min-h-screen bg-background pb-35 lg:p-0 overflow-y-auto",children:[e.jsx(q,{user:i,userProfile:n,forceRefresh:h},`header-${o}`),e.jsx(G,{activeTab:t,onChange:c}),e.jsx(J,{user:i,userProfile:n,activeTab:t,forceRefresh:h},`content-${o}`)]})};export{ie as default};
