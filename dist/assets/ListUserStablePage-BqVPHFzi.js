import{n as v,x as C,j as e,C as S,P as w,y as k,e as P,l as p,R as f,L as M,m as d,M as I,B as R}from"./index-DT8KlFcC.js";import{e as L,u as U,r as l}from"./vendor-router-BURTDQSf.js";import{C as E,S as T,a as $}from"./StableInfo-rijCOl9g.js";import{u as F}from"./useStableManagement-CTasjFtH.js";import"./vendor-react-DavUf6mE.js";import"./vendor-forms-DlkW-UdB.js";import"./LocationPinIcon-CWtGJYLd.js";const O=({member:s,onClick:o})=>{const n=v(s),r=C(s.role),t={id:s.userId||s.id,firstName:s.firstName||"",lastName:s.lastName||"",profilePicture:s.profilePicture};return e.jsx(S,{className:"cursor-pointer",onClick:o,children:e.jsxs("div",{className:"p-2 flex flex-col bg-gradient-to-b from-primary-light to-white",children:[e.jsx("div",{className:"flex justify-center bg-background ",children:e.jsx("div",{className:"w-full h-25 mb-2 rounded-xl overflow-hidden border-2 border-primary lg:h-40 xl:h-45 ",children:e.jsx(w,{user:t,className:"w-full h-30 lg:h-50 lg:aspect-ratio mx-auto",alt:`Profile picture of ${n}`,size:"small",fallbackUrl:null})})}),e.jsx(k,{className:"text-xs !text-start",children:n}),r&&e.jsx(E,{className:"text-xs !text-start",children:r})]})})},G=()=>{const{stableId:s}=L(),{currentStable:o,currentUser:n}=P(),r=U(),[t,m]=l.useState(""),u=l.useMemo(()=>s||o?.id,[s,o?.id]),{members:c,loading:g,loadingState:x}=F(u),h=l.useMemo(()=>{if(!c.length)return[];if(!t.trim())return c;const a=t.toLowerCase();return c.filter(i=>`${i.firstName} ${i.lastName}`.toLowerCase().includes(a))},[c,t]),b=l.useCallback(a=>{m(a)},[]),N=l.useCallback(a=>{if(a){const i=p(f.USER_PROFILE,{userId:a});r(i)}},[r]),y=l.useCallback(()=>{r(p(f.USER_PROFILE,{userId:n?.id}))},[r,n?.id]),j=l.useMemo(()=>e.jsxs("div",{className:"flex items-center justify-center h-screen",children:[e.jsx(M,{size:"medium",className:"text-gray"}),e.jsx("p",{className:"ml-2",children:x?.getMessage()})]}),[x]);return g?j:e.jsxs(d.div,{className:"flex flex-col min-h-screen bg-background pb-35 overflow-y-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"bg-primary-light lg:bg-background",children:e.jsx(I,{})}),e.jsx(T,{stableId:u,searchTerm:t,onSearchChange:b,searchPlaceholder:"Search..."}),e.jsxs("div",{className:"px-5 py-3 md:px-10 lg:px-40 xl:px-60 pt-2 lg:pt-10",children:[e.jsx("div",{className:"mb-5 border-t border-b border-gray py-5 lg:hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full px-10 py-2 border border-primary rounded-lg focus:outline-none focus:ring-1 focus:ring-primary",value:t,onChange:a=>m(a.target.value)}),e.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center",children:e.jsx($,{className:"w-5 h-5 text-primary",strokeWidth:3})})]})}),e.jsx(d.div,{className:"mb-6 flex justify-center lg:hidden",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},children:e.jsx(R,{type:"secondary",className:"w-full max-w-sm",onClick:y,children:"My profile"})}),e.jsx(d.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 gap-5",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.08}}},children:h.map((a,i)=>e.jsx(d.div,{variants:{hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1}},whileHover:{y:-2,scale:1.02,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},whileTap:{scale:.98},transition:{duration:.2},children:e.jsx(O,{member:a,onClick:()=>N(a.userId)})},`stable-member-${a.id}-${i}`))}),h.length===0&&e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-gray",children:"No members found"})})]})]})};export{G as default};
